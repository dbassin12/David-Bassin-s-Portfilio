<!DOCTYPE html>
<html lang="en" class="h-full scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>David Bassin - AI Operations &amp; Enablement</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='6' fill='%2338BDF8'/><text x='16' y='23' font-size='20' font-weight='bold' text-anchor='middle' fill='%230f172a'>DB</text></svg>" type="image/svg+xml">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Manrope', 'ui-sans-serif', 'system-ui'],
            display: ['Space Grotesk', 'Manrope', 'ui-sans-serif', 'system-ui']
          },
          colors: {
            ink: '#E2E8F0',
            surface: 'rgba(255,255,255,0.05)',
            surface2: 'rgba(255,255,255,0.08)',
            border: 'rgba(255,255,255,0.10)',
            accent: { 400: '#38BDF8', 500: '#0EA5E9' }
          },
          boxShadow: {
            'card': '0 1px 0 rgba(255,255,255,0.7) inset, 0 0 0 1px rgba(15,23,42,0.06), 0 18px 40px rgba(15,23,42,0.12)',
          },
        }
      }
    }
  </script>
  <style>
    html { font-size: 112.5%; }

    .section-tint {
      border: 1px solid rgba(148, 163, 184, 0.45);
      border-radius: 1rem;
      padding: 1.25rem;
    }
    .section-tint-sky { background: linear-gradient(135deg, rgba(186, 230, 253, 0.28), rgba(241, 245, 249, 0.75)); }
    .section-tint-cyan { background: linear-gradient(135deg, rgba(165, 243, 252, 0.22), rgba(241, 245, 249, 0.75)); }
    .section-tint-emerald { background: linear-gradient(135deg, rgba(167, 243, 208, 0.2), rgba(241, 245, 249, 0.75)); }
    .section-tint-amber { background: linear-gradient(135deg, rgba(253, 230, 138, 0.2), rgba(241, 245, 249, 0.78)); }
    .section-tint-indigo { background: linear-gradient(135deg, rgba(199, 210, 254, 0.22), rgba(241, 245, 249, 0.78)); }
    .section-tint-slate { background: linear-gradient(135deg, rgba(226, 232, 240, 0.65), rgba(248, 250, 252, 0.8)); }

    .lift-card {
      transition: transform 220ms ease, box-shadow 220ms ease, background-color 180ms ease;
    }
    .lift-card:hover {
      transform: translateY(-2px);
    }

    .reveal-item {
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 420ms ease, transform 420ms ease;
      will-change: opacity, transform;
    }
    .reveal-item.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Independent modal scroll */
    #modalPanel {
      max-height: 85vh;
      display: flex;
      flex-direction: column;
    }
    #modalBody {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    @media (prefers-reduced-motion: reduce) {
      .lift-card { transition: none; }
      .lift-card:hover { transform: none; }
      .reveal-item {
        opacity: 1;
        transform: none;
        transition: none;
      }
    }
  </style>
</head>

<body class="h-full bg-[color:var(--ink,#E2E8F0)] bg-gradient-to-b from-slate-200 via-slate-100 to-slate-200 text-base leading-[1.6] text-slate-900 font-sans antialiased selection:bg-accent-500/25 selection:text-slate-900">
  <script>
    document.documentElement.style.setProperty('--ink', '#E2E8F0');
  </script>

  <!-- ========== HEADER ========== -->
  <header class="sticky top-0 z-40 border-b border-slate-300 bg-[#E2E8F0]/85 backdrop-blur">
    <nav class="mx-auto flex max-w-6xl items-center justify-between px-4 py-3 sm:px-6">
      <div class="flex items-center gap-2">
        <div class="leading-tight">
          <div class="text-base font-display font-semibold tracking-tight text-slate-900">David Bassin</div>
          <div class="text-xs text-slate-600">AI Operations &amp; Enablement</div>
        </div>
      </div>

      <div class="hidden items-center gap-6 sm:flex">
        <a href="#philosophy" class="text-base text-slate-700 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-accent-400/40 rounded-md px-2 py-1">Philosophy</a>
        <a href="#operating-model" class="text-base text-slate-700 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-accent-400/40 rounded-md px-2 py-1">Model</a>
        <a href="#projects" class="text-base text-slate-700 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-accent-400/40 rounded-md px-2 py-1">Projects</a>
        <a href="#kpis" class="text-base text-slate-700 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-accent-400/40 rounded-md px-2 py-1">KPIs</a>
        <a href="mailto:davidbassin12@gmail.com?subject=Portfolio%20Inquiry" aria-label="Send email to David Bassin" class="text-base text-slate-700 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-accent-400/40 rounded-md px-2 py-1">Contact</a>
        <a href="https://docs.google.com/document/d/1sUjQCmzor28uOgBydsSYyZV23NUUdL2V/edit?usp=sharing&ouid=108450998978584059088&rtpof=true&sd=true" target="_blank" rel="noopener noreferrer" aria-label="View resume (opens in new tab)" class="text-base text-slate-700 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-accent-400/40 rounded-md px-2 py-1">Resume</a>
        <a href="#kpis" class="inline-flex items-center gap-2 rounded-lg bg-accent-400 px-4 py-2.5 text-base font-semibold text-slate-950 hover:bg-accent-500 focus:outline-none focus:ring-2 focus:ring-accent-400/40">
          View KPIs
          <span aria-hidden="true" class="text-slate-600">&darr;</span>
        </a>
      </div>

      <button id="mobileMenuBtn" class="sm:hidden inline-flex items-center justify-center rounded-lg p-2 text-slate-800 hover:bg-slate-100/80 focus:outline-none focus:ring-2 focus:ring-accent-400/40" aria-label="Open menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="text-slate-800">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </nav>

    <div id="mobileMenu" class="sm:hidden hidden border-t border-slate-300 bg-[#E2E8F0]/95">
      <div class="mx-auto max-w-6xl px-4 py-3">
        <div class="grid grid-cols-2 gap-2">
          <a href="#philosophy" class="rounded-lg border border-slate-300 bg-slate-100/80 px-3 py-2 text-sm text-slate-800 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">Philosophy</a>
          <a href="#operating-model" class="rounded-lg border border-slate-300 bg-slate-100/80 px-3 py-2 text-sm text-slate-800 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">Model</a>
          <a href="#projects" class="rounded-lg border border-slate-300 bg-slate-100/80 px-3 py-2 text-sm text-slate-800 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">Projects</a>
          <a href="#kpis" class="rounded-lg border border-slate-300 bg-slate-100/80 px-3 py-2 text-sm text-slate-800 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">KPIs</a>
          <a href="mailto:davidbassin12@gmail.com?subject=Portfolio%20Inquiry" class="rounded-lg border border-slate-300 bg-slate-100/80 px-3 py-2 text-sm text-slate-800 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">Contact</a>
          <a href="https://docs.google.com/document/d/1sUjQCmzor28uOgBydsSYyZV23NUUdL2V/edit?usp=sharing&ouid=108450998978584059088&rtpof=true&sd=true" target="_blank" rel="noopener noreferrer" class="rounded-lg border border-slate-300 bg-slate-100/80 px-3 py-2 text-sm text-slate-800 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">Resume</a>
        </div>
      </div>
    </div>
  </header>

  <!-- ========== HERO ========== -->
  <section data-reveal class="section-tint section-tint-slate mx-auto max-w-6xl px-4 pt-10 sm:px-6 sm:pt-12">
    <div class="relative">
      <div class="pointer-events-none absolute -top-28 -right-28 h-80 w-80 rounded-full bg-accent-400/15 blur-3xl"></div>
      <div class="pointer-events-none absolute -bottom-28 -left-28 h-80 w-80 rounded-full bg-indigo-400/10 blur-3xl"></div>

      <div class="relative">
        <div class="flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between">
          <div class="w-full lg:flex-[0.6]">
            <div class="inline-flex items-center gap-2 rounded-full border border-slate-300 bg-slate-100/80 px-3 py-1.5 text-sm font-semibold text-slate-800">
              <span class="h-2 w-2 rounded-full bg-accent-400/90"></span>
              AI Operations &amp; Enablement Portfolio
            </div>

            <h1 class="mt-4 font-display text-5xl font-bold tracking-tight text-slate-900 sm:text-6xl">
              David Bassin
            </h1>
            <p class="mt-2 text-xl font-semibold text-slate-800 sm:text-2xl">
              AI Operations &amp; Enablement
            </p>
            <p class="mt-3 text-3xl font-medium text-slate-900 sm:text-4xl">
              "I engineer the guardrails that make AI reliable."
            </p>

            <div class="mt-5 rounded-xl border border-slate-300 bg-slate-100/80 p-5 shadow-card">
              <div class="text-lg font-semibold text-slate-800">
                Bio
              </div>
              <p class="mt-3 text-lg leading-relaxed text-slate-700">
                I built human-in-the-loop workflows that cut administrative processing by 63-85% while catching a 17-point scoring error that full automation would have missed. My background is a decade of building systems for human learning where consistency, feedback, and real-world constraints mattered every day. That experience now shapes how I design AI operations: clear guardrails, measurable outcomes, and human judgment at every decision point where context, risk, and policy matter most.
              </p>
            </div>

            <!-- CTA buttons: 2x2 grid on mobile, row on desktop -->
            <div class="mt-6 grid grid-cols-2 gap-3 sm:flex sm:flex-wrap sm:items-center">
              <a href="#projects" class="inline-flex h-14 items-center justify-center whitespace-nowrap rounded-lg bg-accent-400 px-7 text-lg font-semibold text-slate-950 shadow-sm hover:bg-accent-500 focus:outline-none focus:ring-2 focus:ring-accent-400/40">
                View Projects
              </a>
              <a href="#kpis" class="inline-flex h-14 items-center justify-center whitespace-nowrap rounded-lg border border-slate-300 bg-slate-100/80 px-7 text-lg font-semibold text-slate-900 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">
                View KPIs
              </a>
              <a href="https://docs.google.com/document/d/1sUjQCmzor28uOgBydsSYyZV23NUUdL2V/edit?usp=sharing&ouid=108450998978584059088&rtpof=true&sd=true" target="_blank" rel="noopener noreferrer" aria-label="View resume (opens in new tab)" class="inline-flex h-14 items-center justify-center whitespace-nowrap rounded-lg border border-slate-300 bg-slate-100/80 px-7 text-lg font-semibold text-slate-900 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">
                Resume
              </a>
              <a href="mailto:davidbassin12@gmail.com?subject=Portfolio%20Inquiry" aria-label="Send email to David Bassin" class="inline-flex h-14 items-center justify-center whitespace-nowrap rounded-lg border border-slate-300 bg-slate-100/80 px-7 text-lg font-semibold text-slate-900 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40">
                Contact
              </a>
            </div>
          </div>

          <div class="w-full lg:flex-[0.4]">
            <div class="rounded-2xl border border-amber-200 bg-amber-50/80 p-2.5 shadow-card ring-1 ring-accent-400/20">
              <div class="flex items-center justify-between">
                <div class="text-base font-semibold text-slate-950">Profile</div>
              </div>
              <div class="mt-3 overflow-hidden rounded-xl border border-amber-200 bg-white/80">
                <img
                  src="./headshot.png"
                  alt="David Bassin headshot"
                  class="w-full object-cover"
                  style="aspect-ratio: 6/5;"
                  loading="lazy"
                  decoding="async"
                />
              </div>
              <div class="mt-4 rounded-xl border border-accent-400/35 bg-white/75 p-3">
                <div class="text-xs font-semibold uppercase tracking-wide text-slate-700">Operating Mode</div>
                <div class="mt-1 text-base font-semibold text-slate-950">Guardrails-first delivery. Reliability over novelty.</div>
                <div class="mt-3 flex flex-wrap items-center gap-2">
                  <span class="inline-flex items-center rounded-full bg-accent-400/10 px-3 py-1.5 text-sm font-semibold text-slate-900 ring-1 ring-accent-400/25">Deterministic workflows</span>
                  <span class="inline-flex items-center rounded-full bg-accent-400/10 px-3 py-1.5 text-sm font-semibold text-slate-900 ring-1 ring-accent-400/25">Audit-ready outputs</span>
                  <span class="inline-flex items-center rounded-full bg-accent-400/10 px-3 py-1.5 text-sm font-semibold text-slate-900 ring-1 ring-accent-400/25">Human-reviewed decisions</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== OPERATING PHILOSOPHY ========== -->
  <section id="philosophy" data-reveal class="section-tint section-tint-amber mx-auto max-w-6xl px-4 pt-10 sm:px-6 sm:pt-12">
    <div class="flex items-end justify-between gap-4">
      <div>
        <h2 class="font-display text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">Operating Philosophy</h2>
        <p class="mt-1 text-base text-slate-600">The standards I use to keep AI delivery reliable.</p>
      </div>
    </div>
    <div class="mt-5 grid grid-cols-1 gap-4 md:grid-cols-3">
      <div class="rounded-xl border border-slate-300 bg-slate-100/80 p-5 shadow-card">
        <div class="text-base font-semibold text-slate-900">Structure before intelligence</div>
        <p class="mt-2 text-base leading-relaxed text-slate-700">Define the workflow first, then apply the model where it creates leverage.</p>
      </div>
      <div class="rounded-xl border border-slate-300 bg-slate-100/80 p-5 shadow-card">
        <div class="text-base font-semibold text-slate-900">Reliability over novelty</div>
        <p class="mt-2 text-base leading-relaxed text-slate-700">Prioritize repeatable outputs that teams can trust and verify.</p>
      </div>
      <div class="rounded-xl border border-slate-300 bg-slate-100/80 p-5 shadow-card">
        <div class="text-base font-semibold text-slate-900">Human judgment at decision points</div>
        <p class="mt-2 text-base leading-relaxed text-slate-700">Keep people in control where context, risk, and policy matter most.</p>
      </div>
    </div>
  </section>

  <!-- ========== OPERATING MODEL ========== -->
  <section id="operating-model" data-reveal class="section-tint section-tint-indigo mx-auto max-w-6xl px-4 pt-10 sm:px-6 sm:pt-12">
    <div class="flex items-end justify-between gap-4">
      <div>
        <h2 class="font-display text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">Operating Model</h2>
        <p class="mt-1 text-base text-slate-600">A simple loop for turning experiments into dependable outcomes.</p>
      </div>
    </div>

    <div class="mt-5 grid grid-cols-1 gap-4 lg:grid-cols-3">
      <div class="rounded-xl border border-slate-300 bg-slate-100/80 p-5 shadow-card">
        <div class="text-base font-semibold text-slate-600">Step 1</div>
        <div class="mt-1 text-base font-semibold text-slate-900">Define guardrails</div>
        <p class="mt-2 text-base leading-relaxed text-slate-700">Set scope, quality thresholds, and review criteria before automation starts.</p>
      </div>
      <div class="rounded-xl border border-slate-300 bg-slate-100/80 p-5 shadow-card">
        <div class="text-base font-semibold text-slate-600">Step 2</div>
        <div class="mt-1 text-base font-semibold text-slate-900">Run deterministic workflow</div>
        <p class="mt-2 text-base leading-relaxed text-slate-700">Use constrained prompts, scripts, and checks to keep output behavior stable.</p>
      </div>
      <div class="rounded-xl border border-slate-300 bg-slate-100/80 p-5 shadow-card">
        <div class="text-base font-semibold text-slate-600">Step 3</div>
        <div class="mt-1 text-base font-semibold text-slate-900">Review and iterate</div>
        <p class="mt-2 text-base leading-relaxed text-slate-700">Validate outcomes, document exceptions, and refine the system based on evidence.</p>
      </div>
    </div>
  </section>

  <!-- ========== PROJECTS (2-col on desktop) ========== -->
  <section id="projects" data-reveal class="section-tint section-tint-sky mx-auto max-w-6xl px-4 pt-10 sm:px-6 sm:pt-12">
    <div class="flex items-end justify-between gap-4">
      <div>
        <h2 class="font-display text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">Projects</h2>
        <p class="mt-1 text-lg text-slate-600">Representative builds showing problem, solution, and impact.</p>
      </div>
      <div class="hidden sm:block text-base leading-[1.6] text-slate-500">Click a project to drill down</div>
    </div>

    <div id="projectGrid" class="mt-5 grid grid-cols-1 gap-4 md:grid-cols-2"></div>
  </section>

  <!-- ========== KPIs (reordered: governance first) ========== -->
  <section id="kpis" data-reveal class="section-tint section-tint-cyan mx-auto max-w-6xl px-4 pt-10 sm:px-6 sm:pt-12">
    <div class="flex items-end justify-between gap-4">
      <div>
        <h2 class="font-display text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">Measured Outcomes</h2>
        <p class="mt-1 text-lg text-slate-600">Measured results from the workflows shown above.</p>
      </div>
      <div class="hidden sm:block text-base leading-[1.6] text-slate-500">Click a KPI card to drill down</div>
    </div>

    <div id="kpiGrid" class="mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2"></div>
  </section>

  <!-- ========== FOOTER ========== -->
  <footer class="mx-auto max-w-6xl px-4 py-10 sm:px-6">
    <div class="flex flex-col items-center justify-between gap-4 border-t border-slate-300 pt-8 sm:flex-row">
      <div class="text-center sm:text-left">
        <div class="text-base font-semibold text-slate-800">David Bassin</div>
        <div class="mt-1 text-sm text-slate-500">AI Operations &amp; Enablement</div>
      </div>
      <div class="flex items-center gap-4 text-sm text-slate-500">
        <a href="mailto:davidbassin12@gmail.com" aria-label="Email David Bassin" class="hover:text-slate-800 transition-colors">davidbassin12@gmail.com</a>
        <span class="text-slate-300">|</span>
        <span>&copy; 2026</span>
      </div>
    </div>
  </footer>

  <!-- ========== MODAL ========== -->
  <div id="modalOverlay" class="fixed inset-0 z-50 hidden" aria-hidden="true">
    <div id="modalBackdrop" class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>

    <div class="relative mx-auto flex min-h-screen max-w-3xl items-start justify-center px-4 py-10 sm:px-6">
      <div
        id="modalPanel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="modalTitle"
        class="w-full overflow-hidden rounded-2xl border border-slate-300 bg-white shadow-card"
      >
        <div class="flex items-start justify-between gap-4 border-b border-slate-300 bg-slate-100/80 px-5 py-4 shrink-0">
          <div class="min-w-0">
            <div id="modalLabel" class="text-sm font-semibold uppercase tracking-wide text-slate-600"></div>
            <h3 id="modalTitle" class="mt-1 font-display text-xl font-semibold leading-snug text-slate-900"></h3>
          </div>
          <button
            id="modalCloseBtn"
            class="inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-lg border border-slate-300 bg-slate-100/80 text-slate-800 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40"
            aria-label="Close"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <div id="modalBody" class="px-5 py-5"></div>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // Data - KPIs reordered: governance first, then efficiency, then reliability
    // =========================
    const kpis = [
      {
        id: "kpi-calibration-control",
        label: "GOVERNANCE",
        title: "17-Point Score Drift Caught by Human Override (Pre-Finalization)",
        metric: "AI draft 79 -> calibrated 96",
        value: "17pt",
        detail: "Prevented a materially incorrect score before release",
        projectId: "proj-hitl-assessment",
        shortContext: "A high-stakes scoring workflow surfaced an outlier variance that would have produced a materially incorrect final decision without a defined human-only control point.",
        howMeasured: "Logged AI draft score vs final calibrated score on the flagged case; variance measured as a 17-point delta.",
        businessImpact: "Prevented a materially incorrect evaluation from being issued; protects decision integrity and reduces dispute/regrade risk."
      },
      {
        id: "kpi-grading-cycle",
        label: "EFFICIENCY",
        title: "63% Reduction in Essay Grading Time",
        metric: "17.4 hrs -> 6.5 hrs",
        value: "63%",
        detail: "87 essays processed per grading cycle",
        projectId: "proj-auto-rubric",
        shortContext: "Essay grading load increased to 87 submissions per cycle, creating turnaround bottlenecks.",
        howMeasured: "Compared historical manual grading hours against pipeline-assisted grading over equivalent assignment volume.",
        businessImpact: "Recovered instructional planning time while improving grading turnaround consistency."
      },
      {
        id: "kpi-reporting-cycle",
        label: "EFFICIENCY",
        title: "85% Reduction in Progress Reporting Time",
        metric: "8 hrs -> 1 hr",
        value: "85%",
        detail: "106 reports generated per cycle",
        projectId: "proj-hitl-assessment",
        shortContext: "Progress reporting required repetitive synthesis and editing across high report volume.",
        howMeasured: "Timed full reporting cycles before and after introducing structured AI-assisted draft generation with human review.",
        businessImpact: "Reduced reporting overhead and increased capacity for stakeholder communication quality control."
      },
      {
        id: "kpi-data-integrity",
        label: "RELIABILITY",
        title: "Zero Transposition Errors Across 95 Production Records",
        metric: "95 records per cycle",
        value: "0",
        detail: "Validated across multiple production grading cycles",
        projectId: "proj-academic-data-automation-pipeline",
        shortContext: "Dual-system entry between LMS and SIS introduced consistent transposition risk each grading cycle.",
        howMeasured: "Reconciled pre-entry and post-entry records across production cycles using deterministic export snapshots.",
        businessImpact: "Preserved cross-system data integrity and eliminated correction rework in production cycles."
      }
    ];

    const projects = [
      {
        id: "proj-ai-job-tracker",
        ready: true,
        title: "Automated Job Tracker (v1 to v5)",
        category: "Workflow Automation",
        kpiBullets: [
          "Near-zero maintenance overhead after LLM migration",
          "Context-aware email classification with structured JSON outputs",
          "Dry-run and audit logs at approximately $0.01/day"
        ],
        thumbnailUrl: "./auto job updater.jpg",
        thumbnailFit: "cover",
        problem: "Static tracking could not keep pace with continuous Gmail updates. Rule-based parsing required manual keyword/company maintenance and hit ambiguity limits.",
        solution: "Migrated from rule-based Google Apps Script classification to LLM-powered classification with structured JSON outputs, while preserving pre-filtering, status-priority updates, and audit logs.",
        impact: "Reduced maintenance to near-zero list upkeep, improved context-aware classification, and achieved full auditability with dry-run previews at about $0.01/day.",
        execDocUrl: "https://drive.google.com/file/d/1bEl8fO-zP-QiWtAmfpbYoiQdvTLq0tGk/view?usp=sharing"
      },
      {
        id: "proj-auto-rubric",
        ready: true,
        title: "The Auto-Rubric Engine",
        category: "Human-in-the-Loop AI",
        kpiBullets: [
          "63% reduction in grading time (17.4 hrs ? 6.5 hrs)",
          "100% rubric alignment across 87 essays",
          "Human calibration caught 17-point scoring error"
        ],
        thumbnailUrl: "./Time saved image.jpg",
        problem: 'Grading 87+ essays caused high latency and "rater drift" - inconsistency creeping in over long grading sessions.',
        solution: "Built a Python/Gemini pipeline with strict system prompts acting as an objective examiner, with mandatory human calibration at every decision point.",
        impact: "63% reduction in grading time with 100% rubric alignment. Human override caught a 17-point scoring error the AI would have released unchecked.",
        execDocUrl: "https://drive.google.com/file/d/1oVzftKa4jW5YtfHmmDvTvo8zSqpZpjGh/view?usp=sharing"
      },
      {
        id: "proj-digital-librarian",
        ready: true,
        title: "The Digital Librarian",
        category: "Knowledge Ops (RAG)",
        kpiBullets: [
          "5,000+ files processed in a single local migration cycle",
          "Zero privacy leaks - all processing local",
          "AI tested and rejected for categorization after regression"
        ],
        thumbnailUrl: "./my private econ tutor rag.jpg",
        problem: "5,000+ unstructured files were unsearchable; cloud tools hallucinated locations and silently degraded accuracy.",
        solution: 'Architected a local "Vacuum & Vault" Python script for deterministic organization, then built a private RAG chatbot (Ollama + ChromaDB + Streamlit) for curriculum Q&A.',
        impact: "Zero privacy leaks, 100% deterministic file organization. AI was tested for bulk categorization and deliberately rolled back after producing worse results than keyword rules.",
        execDocUrl: "https://drive.google.com/file/d/1v1aUj0zhjr63ZEiROCQr3S-CQcX13yZ_/view?usp=sharing"
      },
      {
        id: "proj-academic-data-automation-pipeline",
        ready: true,
        title: "Cross-System Data Integrity Pipeline",
        category: "Data Reliability",
        kpiBullets: [
          "95 records processed per grading cycle with zero errors",
          "0 ToS/API violations - browser automation killed after compliance audit",
          "Full audit trail from export to entry"
        ],
        tagline: "Schoology (LMS) -> Veracross (SIS) integration, compliance-first with human-in-the-loop.",
        chips: [
          "Compliance-first automation",
          "ETL + human-in-the-loop"
        ],
        kpiPills: [
          "95 records/cycle",
          "0 ToS violations",
          "0 transposition errors"
        ],
        aliasesText: "Previously: Schoology-Veracross Bridge; Progress Report Generator",
        thumbnailUrl: "./Veracross-Schoology image.jpg",
        problem: "Disconnected Schoology (LMS) and Veracross (SIS) forced manual double entry and created high transposition risk across 95 student records each grading cycle.",
        solution: "Built a local Python ETL pipeline that ingests Schoology CSV exports, transforms and sorts the roster to match Veracross display order, and generates an immutable snapshot for deterministic, auditable entry. Browser automation was intentionally rejected after compliance review due to vendor acceptable use and FERPA/security risk; final workflow keeps a human-in-the-loop for last-mile entry.",
        impact: "Accuracy held across production cycles with no transposition errors detected; reduced lookup time by eliminating cross-system visual matching; maintained an audit trail from export to entry; and achieved the right level of automation without ToS/API violations.",
        keyDecisions: [
          "Killed Selenium/RPA approach due to explicit ToS restriction and FERPA exposure risk.",
          "Chose terminal output and local processing to minimize data persistence exposure."
        ],
        execDocUrl: "https://drive.google.com/file/d/1bj8jVO4KNxkBM2T3_jm8Vf2JPMITs7n1/view?usp=sharing"
      },
      {
        id: "proj-hitl-assessment",
        ready: true,
        title: "Assessment Governance by Design",
        category: "Governance by Design",
        kpiBullets: [
          "Explicit human-only decision zones in scoring workflow",
          "Baseline + bounded override model reduces live cognitive load",
          "Post-launch metrics defined: reliability, dispute rate, rater consistency"
        ],
        thumbnailUrl: "./human in the loop approach.jpg",
        problem: "High-stakes group assessment had structural failures: group grades masked individual understanding, charisma bias, cognitive overload during live evaluation, and AI made traditional plagiarism policing ineffective.",
        solution: "Redesigned the workflow: three-level rubric, separate group artifact score from individual understanding, baseline plus bounded override (+/-5), single Google Form intake with timestamped audit trail, and explicit human-only zones where AI cannot decide.",
        impact: "Pre-deployment. Architecture complete and ready to run. Success metrics will be collected after first delivery (reliability, dispute rate, and rater consistency).",
        execDocUrl: "https://drive.google.com/file/d/1z25PjGribJ1MiuvbrGcFkxJhBTs4ZqND/view?usp=sharing"
      }
    ];

    const projectsById = Object.fromEntries(
      projects.map((project) => [
        project.id,
        { ...project, caseStudyUrl: project.caseStudyUrl || project.execDocUrl || "" }
      ])
    );

    // =========================
    // Rendering Helpers
    // =========================
    const el = (tag, className = "", attrs = {}) => {
      const node = document.createElement(tag);
      if (className) node.className = className;
      Object.entries(attrs).forEach(([k, v]) => node.setAttribute(k, v));
      return node;
    };

    const safeText = (s) => (typeof s === "string" ? s : "");

    function isPlaceholderUrl(url) {
      const placeholderHost = ["example", "com"].join(".");
      return !url || String(url).includes(placeholderHost);
    }

    function toDriveFileId(url) {
      if (!url) return "";
      const match = String(url).match(/drive\.google\.com\/file\/d\/([^/]+)/);
      return match ? match[1] : "";
    }

    function toDriveViewUrl(url) {
      const id = toDriveFileId(url);
      if (!id) return url || "";
      return `https://drive.google.com/file/d/${id}/view?usp=sharing`;
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    // =========================
    // KPI Cards
    // =========================
    function renderKpiCards() {
      const grid = document.getElementById("kpiGrid");
      grid.innerHTML = "";

      kpis.forEach((kpi) => {
        const btn = el("button",
          "group lift-card w-full rounded-2xl border border-slate-300 border-t-4 border-t-sky-400 bg-slate-100/80 p-5 text-left shadow-card transition-colors hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-accent-400/40",
          { type: "button", "data-type": "kpi", "data-id": kpi.id, "data-reveal": "card" }
        );

        const top = el("div", "flex items-start justify-between gap-4");
        const left = el("div", "min-w-0");
        const label = el("div", "inline-flex items-center gap-2 text-lg font-semibold uppercase tracking-wide text-slate-600");
        label.innerHTML = `<span class="h-2 w-2 rounded-full bg-accent-400/90"></span><span>${escapeHtml(kpi.label)}</span>`;

        const title = el("div", "mt-1 text-lg font-semibold text-slate-900");
        title.textContent = safeText(kpi.title);
        const source = el("div", "mt-3 text-lg leading-[1.6] font-semibold text-slate-500");
        const linkedProject = projects.find((p) => p.id === kpi.projectId);
        source.textContent = `Observed in: ${safeText(linkedProject ? linkedProject.title : "")}`;

        left.appendChild(label);
        left.appendChild(title);
        left.appendChild(source);

        const chip = el("div", "shrink-0 inline-flex items-center rounded-lg border border-slate-300 bg-slate-100/80 px-2.5 py-1 text-lg font-semibold text-slate-700");
        chip.textContent = "KPI";

        top.appendChild(left);
        top.appendChild(chip);

        const metricRow = el("div", "mt-5 flex items-baseline justify-between gap-4");
        const big = el("div", "text-5xl font-bold tracking-tight text-slate-900");
        big.textContent = safeText(kpi.value);

        const sub = el("div", "text-lg font-semibold text-slate-700");
        sub.textContent = safeText(kpi.metric);

        metricRow.appendChild(big);
        metricRow.appendChild(sub);

        const footer = el("div", "mt-5 flex items-center justify-end");
        const afford = el("div", "inline-flex items-center gap-2 text-lg font-semibold text-slate-800");
        afford.innerHTML = `
          <span class="rounded-md border border-slate-300 bg-slate-100/80 px-4 py-2 group-hover:bg-slate-200">View details</span>
          <span aria-hidden="true" class="text-slate-500">&#8599;</span>
        `;
        footer.appendChild(afford);

        btn.appendChild(top);
        btn.appendChild(metricRow);
        btn.appendChild(footer);

        grid.appendChild(btn);
      });
    }

    // =========================
    // Project Cards - 2-col grid on desktop
    // =========================
    function renderProjectCards() {
      const grid = document.getElementById("projectGrid");
      grid.innerHTML = "";

      projects.forEach((proj) => {
        const btn = el("button",
          "group lift-card w-full flex flex-col rounded-2xl border border-slate-200 border-t-4 border-t-sky-400 bg-slate-100/80 p-5 text-left shadow-card transition-colors hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-accent-400/40",
          { type: "button", "data-type": "project", "data-id": proj.id, "data-reveal": "card" }
        );

        const thumbWrap = el("div", "overflow-hidden rounded-xl border border-slate-300 bg-slate-100/80");
        const showThumb = Boolean(proj.thumbnailUrl) && proj.showThumbnail !== false;
        if (showThumb) {
          const img = el("img", "h-28 w-full object-cover", {
            src: proj.thumbnailUrl,
            alt: `${safeText(proj.title)} thumbnail`,
            loading: "lazy",
            decoding: "async"
          });
          img.onerror = () => {
            console.warn(`[Project thumbnail missing] ${proj.id}: ${proj.thumbnailUrl}`);
            console.log("Missing image src:", proj.thumbnailUrl);
          };
          thumbWrap.appendChild(img);
        } else {
          const placeholder = el("div", "h-28 w-full bg-gradient-to-br from-slate-200 to-slate-300");
          const placeholderText = el("div", "flex h-full w-full items-center justify-center text-lg font-semibold text-slate-600");
          placeholderText.textContent = "No image yet";
          placeholder.appendChild(placeholderText);
          thumbWrap.appendChild(placeholder);
        }

        const top = el("div", "mt-4 flex items-start justify-between gap-4");
        const left = el("div", "min-w-0");
        const title = el("div", "line-clamp-2 text-xl font-semibold text-slate-900");
        title.textContent = safeText(proj.title);

        const catLabel = el("div", "mt-1 text-sm font-semibold uppercase tracking-wide text-slate-500");
        catLabel.textContent = safeText(proj.category);

        left.appendChild(title);
        left.appendChild(catLabel);

        const chip = el("div", "shrink-0 inline-flex items-center rounded-lg border border-slate-300 bg-slate-100/80 px-2.5 py-1 text-sm font-semibold text-slate-700");
        chip.textContent = "Project";

        top.appendChild(left);
        top.appendChild(chip);

        const body = el("div", "mt-4 space-y-2 flex-1");
        const bullets = Array.isArray(proj.kpiBullets) ? proj.kpiBullets.slice(0, 3) : [];
        const ul = el("ul", "space-y-2");
        bullets.forEach((b) => {
          const li = el("li", "flex items-start gap-3 text-base leading-relaxed text-slate-700");
          const dot = el("span", "mt-2 h-1.5 w-1.5 shrink-0 rounded-full bg-accent-400/80");
          const txt = el("div", "");
          txt.textContent = safeText(b);
          li.appendChild(dot);
          li.appendChild(txt);
          ul.appendChild(li);
        });
        body.appendChild(ul);

        const footer = el("div", "mt-auto pt-4 flex items-center justify-end");
        const afford = el("div", "inline-flex items-center gap-2 text-base font-semibold text-slate-800");
        afford.innerHTML = `
          <span class="rounded-md border border-slate-200 bg-slate-100/80 px-4 py-2 text-base font-semibold group-hover:bg-slate-100">View details</span>
          <span aria-hidden="true" class="text-slate-500">&#8599;</span>
        `;
        footer.appendChild(afford);

        btn.appendChild(thumbWrap);
        btn.appendChild(top);
        btn.appendChild(body);
        btn.appendChild(footer);

        grid.appendChild(btn);
      });

      // If odd number of projects, make the last card span full width
      if (projects.length % 2 === 1 && grid.lastElementChild) {
        grid.lastElementChild.classList.add("md:col-span-2");
      }
    }

    // =========================
    // Modal
    // =========================
    const overlay = document.getElementById("modalOverlay");
    const backdrop = document.getElementById("modalBackdrop");
    const closeBtn = document.getElementById("modalCloseBtn");
    const modalTitle = document.getElementById("modalTitle");
    const modalLabel = document.getElementById("modalLabel");
    const modalBody = document.getElementById("modalBody");

    let lastFocused = null;

    function openModal({ type, id }) {
      lastFocused = document.activeElement;

      const data = type === "kpi" ? kpis.find(x => x.id === id) : projects.find(x => x.id === id);
      if (!data) return;

      modalBody.innerHTML = "";
      if (type === "kpi") {
        modalLabel.textContent = safeText(data.label);
        modalTitle.textContent = safeText(data.title);
        modalBody.appendChild(renderKpiModalBody(data));
      } else {
        modalLabel.textContent = "Project";
        modalTitle.textContent = safeText(data.title);
        modalBody.appendChild(renderProjectModalBody(data));
      }

      overlay.classList.remove("hidden");
      overlay.setAttribute("aria-hidden", "false");
      document.body.classList.add("overflow-hidden");
      closeBtn.focus();
    }

    function closeModal() {
      overlay.classList.add("hidden");
      overlay.setAttribute("aria-hidden", "true");
      document.body.classList.remove("overflow-hidden");
      modalBody.innerHTML = "";

      if (lastFocused && typeof lastFocused.focus === "function") lastFocused.focus();
      lastFocused = null;
    }

    function renderSection(title) {
      const section = el("div", "rounded-xl border border-slate-300 bg-slate-100/80 p-4");
      const h = el("div", "text-sm font-semibold uppercase tracking-wide text-slate-600");
      h.textContent = title;
      section.appendChild(h);
      return section;
    }

    function renderBullets(items) {
      const ul = el("ul", "mt-3 space-y-2");
      items.forEach((it) => {
        const li = el("li", "flex items-start gap-3");
        const dot = el("span", "mt-2 h-1.5 w-1.5 shrink-0 rounded-full bg-accent-400/80");
        const txt = el("div", "text-base leading-[1.6] text-slate-800");
        txt.textContent = it;
        li.appendChild(dot);
        li.appendChild(txt);
        ul.appendChild(li);
      });
      return ul;
    }

    function renderKpiModalBody(kpi) {
      const wrap = el("div", "space-y-4");
      const linkedProject = projectsById[kpi.projectId];
      const observedIn = safeText(linkedProject ? linkedProject.title : "Unlinked project");

      const summary = el("div", "rounded-xl border border-slate-300 bg-slate-100/80 p-4");
      const summaryLabel = el("div", "text-sm font-semibold uppercase tracking-wide text-slate-600");
      summaryLabel.textContent = "Observed In";
      const summaryValue = el("div", "mt-1 text-base font-semibold text-slate-900");
      summaryValue.textContent = observedIn;
      const summaryMetric = el("div", "mt-3 text-base leading-[1.6] text-slate-700");
      summaryMetric.textContent = `${safeText(kpi.value)} \u2022 ${safeText(kpi.metric)}`;
      summary.appendChild(summaryLabel);
      summary.appendChild(summaryValue);
      summary.appendChild(summaryMetric);
      wrap.appendChild(summary);

      const context = renderSection("Short Context");
      context.appendChild(renderBullets([safeText(kpi.shortContext || kpi.detail)]));
      wrap.appendChild(context);

      const measured = renderSection("How It Was Measured");
      measured.appendChild(renderBullets([safeText(kpi.howMeasured || kpi.metric)]));
      wrap.appendChild(measured);

      const impact = renderSection("Business Impact");
      impact.appendChild(renderBullets([safeText(kpi.businessImpact || kpi.detail)]));
      wrap.appendChild(impact);

      const bottom = el("div", "rounded-xl border border-slate-300 bg-slate-50 p-4");
      const topRow = el("div", "flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between");
      const left = el("div", "");
      const h = el("div", "text-sm font-semibold uppercase tracking-wide text-slate-600");
      h.textContent = "Case Study";
      const desc = el("div", "mt-1 text-base leading-[1.6] text-slate-700");
      desc.textContent = "Open the full case study for context and key outcomes.";
      left.appendChild(h);
      left.appendChild(desc);

      const right = el("div", "flex flex-wrap items-center gap-2");
      const resolvedCaseStudyUrl = toDriveViewUrl(linkedProject ? linkedProject.caseStudyUrl : "");
      if (!resolvedCaseStudyUrl || isPlaceholderUrl(resolvedCaseStudyUrl)) {
        const comingSoon = el("span", "inline-flex items-center rounded-md border border-slate-300 bg-slate-200 px-2.5 py-1 text-xs font-semibold text-slate-700");
        comingSoon.textContent = "Coming soon";
        right.appendChild(comingSoon);
      } else {
        const link = el("a",
          "inline-flex h-10 items-center justify-center rounded-lg bg-accent-400 px-4 text-base font-semibold text-slate-950 hover:bg-accent-500 focus:outline-none focus:ring-2 focus:ring-accent-400/40",
          { href: resolvedCaseStudyUrl, target: "_blank", rel: "noopener noreferrer" }
        );
        link.textContent = "Open case study";
        right.appendChild(link);
      }

      topRow.appendChild(left);
      topRow.appendChild(right);
      bottom.appendChild(topRow);
      wrap.appendChild(bottom);

      return wrap;
    }

    function renderProjectModalBody(proj) {
      const wrap = el("div", "space-y-4");
      const isAcademicPipeline = proj.id === "proj-academic-data-automation-pipeline";

      function pill(text) {
        const node = el("span", "inline-flex items-center rounded-lg border border-slate-300 bg-slate-100/80 px-2.5 py-1 text-sm font-semibold text-slate-700");
        node.textContent = safeText(text);
        return node;
      }

      function renderTextSection(title, text, withDivider = false) {
        const sec = el("div", `${withDivider ? "border-t border-slate-200/70 " : ""}p-4`);
        const h = el("div", "text-sm font-semibold uppercase tracking-wide text-slate-600");
        h.textContent = title;
        const b = el("div", "mt-2 text-base leading-[1.6] text-slate-800");
        b.textContent = text;
        sec.appendChild(h);
        sec.appendChild(b);
        return sec;
      }

      if (proj.aliasesText || (Array.isArray(proj.chips) && proj.chips.length) || (isAcademicPipeline && Array.isArray(proj.kpiPills) && proj.kpiPills.length)) {
        const header = el("div", "rounded-xl border border-slate-300 bg-slate-100/80 p-4");
        if (proj.aliasesText) {
          const aliases = el("div", "text-base leading-[1.6] text-slate-600");
          aliases.textContent = safeText(proj.aliasesText);
          header.appendChild(aliases);
        }
        if (Array.isArray(proj.chips) && proj.chips.length) {
          const chips = el("div", `${proj.aliasesText ? "mt-3 " : ""}flex flex-wrap gap-2`);
          proj.chips.forEach((chipText) => chips.appendChild(pill(chipText)));
          header.appendChild(chips);
        }
        if (isAcademicPipeline && Array.isArray(proj.kpiPills) && proj.kpiPills.length) {
          const kpiRow = el("div", `${(proj.aliasesText || (Array.isArray(proj.chips) && proj.chips.length)) ? "mt-3 " : ""}flex flex-wrap gap-2`);
          proj.kpiPills.forEach((metric) => kpiRow.appendChild(pill(metric)));
          header.appendChild(kpiRow);
        }
        wrap.appendChild(header);
      }

      if (proj.thumbnailUrl) {
        const mediaDetails = el("details", "rounded-xl border border-slate-300 bg-slate-100/80 p-4");
        const mediaSummary = el("summary", "cursor-pointer text-sm font-semibold text-slate-800 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-accent-400/40 rounded-md px-2 py-1 -mx-2");
        mediaSummary.textContent = "Artifact image (optional)";
        const mediaFitClass = proj.thumbnailFit === "contain" ? "object-contain" : "object-cover";
        const mediaWrapBgClass = proj.thumbnailFit === "contain" ? "bg-white" : "bg-slate-100/80";
        const mediaWrap = el("div", `mt-4 overflow-hidden rounded-lg border border-slate-300 ${mediaWrapBgClass}`);
        const mediaImg = el("img", `h-56 w-full ${mediaFitClass}`, {
          src: proj.thumbnailUrl,
          alt: `${safeText(proj.title)} artifact image`,
          loading: "lazy"
        });
        mediaWrap.appendChild(mediaImg);
        mediaDetails.appendChild(mediaSummary);
        mediaDetails.appendChild(mediaWrap);
        wrap.appendChild(mediaDetails);
      }

      const textSections = el("div", "rounded-xl border border-slate-300 bg-slate-100/80");
      textSections.appendChild(renderTextSection("Problem", proj.problem));
      textSections.appendChild(renderTextSection("Solution", proj.solution, true));
      textSections.appendChild(renderTextSection("Impact", proj.impact, true));
      wrap.appendChild(textSections);

      if (Array.isArray(proj.keyDecisions) && proj.keyDecisions.length) {
        const decisions = renderSection("Key Decisions");
        decisions.appendChild(renderBullets(proj.keyDecisions));
        wrap.appendChild(decisions);
      }

      const bottom = el("div", "rounded-xl border border-slate-300 bg-slate-50 p-4");
      const topRow = el("div", "flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between");
      const left = el("div", "");
      const h = el("div", "text-sm font-semibold uppercase tracking-wide text-slate-600");
      h.textContent = "Case Study";
      const desc = el("div", "mt-1 text-base leading-[1.6] text-slate-700");
      desc.textContent = "Open the full case study for context and key outcomes.";
      left.appendChild(h);
      left.appendChild(desc);

      const right = el("div", "flex flex-wrap items-center gap-2");
      const resolvedProjectDocUrl = toDriveViewUrl(proj.execDocUrl);
      if (!proj.ready || isPlaceholderUrl(resolvedProjectDocUrl)) {
        const comingSoon = el("span", "inline-flex items-center rounded-md border border-slate-300 bg-slate-200 px-2.5 py-1 text-xs font-semibold text-slate-700");
        comingSoon.textContent = "Coming soon";
        right.appendChild(comingSoon);
      } else {
        const link = el("a",
          "inline-flex h-10 items-center justify-center rounded-lg bg-accent-400 px-4 text-base font-semibold text-slate-950 hover:bg-accent-500 focus:outline-none focus:ring-2 focus:ring-accent-400/40",
          { href: resolvedProjectDocUrl, target: "_blank", rel: "noopener noreferrer" }
        );
        link.textContent = "Open case study";
        right.appendChild(link);
      }

      topRow.appendChild(left);
      topRow.appendChild(right);

      bottom.appendChild(topRow);
      wrap.appendChild(bottom);

      return wrap;
    }

    // =========================
    // Event Wiring
    // =========================
    document.addEventListener("click", (e) => {
      const t = e.target.closest("[data-type][data-id]");
      if (t) openModal({ type: t.getAttribute("data-type"), id: t.getAttribute("data-id") });
    });
    closeBtn.addEventListener("click", closeModal);
    backdrop.addEventListener("click", closeModal);

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !overlay.classList.contains("hidden")) closeModal();
    });

    // Focus trap
    overlay.addEventListener("keydown", (e) => {
      if (e.key !== "Tab") return;
      const focusables = overlay.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, iframe, summary, [tabindex]:not([tabindex="-1"])');
      const list = Array.from(focusables).filter(n => n.offsetParent !== null);
      if (!list.length) return;
      const first = list[0];
      const last = list[list.length - 1];

      if (e.shiftKey && document.activeElement === first) {
        e.preventDefault();
        last.focus();
      } else if (!e.shiftKey && document.activeElement === last) {
        e.preventDefault();
        first.focus();
      }
    });

    // Mobile menu
    const mobileMenuBtn = document.getElementById("mobileMenuBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    mobileMenuBtn.addEventListener("click", () => {
      const isHidden = mobileMenu.classList.contains("hidden");
      mobileMenu.classList.toggle("hidden");
      mobileMenuBtn.setAttribute("aria-label", isHidden ? "Close menu" : "Open menu");
    });

    document.addEventListener("click", (e) => {
      const a = e.target.closest("#mobileMenu a");
      if (a) {
        mobileMenu.classList.add("hidden");
        mobileMenuBtn.setAttribute("aria-label", "Open menu");
      }
    });

    // =========================
    // Reveal Motion
    // =========================
    function setupRevealMotion() {
      const items = document.querySelectorAll('[data-reveal]');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      items.forEach((item) => {
        item.classList.add('reveal-item');
        observer.observe(item);
      });
    }

    // =========================
    // Init
    // =========================
    renderKpiCards();
    renderProjectCards();
    setupRevealMotion();
  </script>
</body>
</html>
